<!DOCTYPE html>
<html>
<head>
    <title>Raspberry Pi LED Control</title>
</head>
<body>
    <h1>Raspberry Pi Online Control</h1>
    <
    <button id="turnOnButton" onmousedown="turnOn()" onmouseup="turnOff()" ontouchstart="turnOn()" ontouchend="turnOff()">Forward</button>
    <button id="leftButton" onmousedown="left()" onmouseup="turnOff()" ontouchstart="left()" ontouchend="turnOff()">Left</button>
    <button id="backButton" onmousedown="back()" onmouseup="turnOff()" ontouchstart="back()" ontouchend="turnOff()">Backward</button>
    <button id="rightButton" onmousedown="right()" onmouseup="turnOff()" ontouchstart="right()" ontouchend="turnOff()">Righ</button>
    <!-- Use onmousedown and onmouseup (and ontouchstart and ontouchend for touch devices) events to handle button press and release -->


<div class="main" id="newpost">
  <img  class="camera-bg" style="width: 100%; height:80%; background-attachment: fixed;" id="bg" class="center" src="{{ url_for('video_feed') }}">
  <!--<img  class="camera-bg" style="width: 100%; height:80%; background-attachment: fixed;" id="bg" class="center" src="https://www.psdbox.com/wp-content/uploads/2011/01/security-camera-photoshop-effect.jpg">-->

</div>

    <script>
        var isButtonPressed = false;  // Flag to track if the button is pressed

        // JavaScript function to turn on the LED
        function turnOn() {
            isButtonPressed = true;  // Set the flag to true when the button is pressed
            fetch("/turn_on")  // Send an HTTP GET request to the "/turn_on" route
                .then(response => response.text())  // Get the response as text
                .then(data => console.log(data));  // Log the response data to the console
        }
        function left() {
            isButtonPressed = true;  // Set the flag to true when the button is pressed
            fetch("/left")  // Send an HTTP GET request to the "/turn_on" route
                .then(response => response.text())  // Get the response as text
                .then(data => console.log(data));  // Log the response data to the console
        }

        function back() {
            isButtonPressed = true;  // Set the flag to true when the button is pressed
            fetch("/back")  // Send an HTTP GET request to the "/turn_on" route
                .then(response => response.text())  // Get the response as text
                .then(data => console.log(data));  // Log the response data to the console
        }

        function right() {
            isButtonPressed = true;  // Set the flag to true when the button is pressed
            fetch("/right")  // Send an HTTP GET request to the "/turn_on" route
                .then(response => response.text())  // Get the response as text
                .then(data => console.log(data));  // Log the response data to the console
        }


        // JavaScript function to turn off the LED
        function turnOff() {
            if (isButtonPressed) {  // Check if the button was pressed
                fetch("/turn_off")  // Send an HTTP GET request to the "/turn_off" route
                    .then(response => response.text())  // Get the response as text
                    .then(data => console.log(data));  // Log the response data to the console
            }
            isButtonPressed = false;  // Reset the flag to false when the button is released
        }
    </script>
</body>
</html>
